{% extends "base.html" %}
{% from "partials/components.html" import page_header, collapse, action_btn %}
{% block title %}Config - Compose Farm{% endblock %}

{% block content %}
<div class="max-w-5xl">
    {{ page_header("Configuration", "<code>" ~ config_path ~ "</code>") }}

    <!-- Action Buttons -->
    <div class="flex flex-wrap gap-2 mb-6">
        <button id="save-config-btn" class="btn btn-outline">Save</button>
        {{ action_btn("Apply", "/api/apply", "primary") }}
        {{ action_btn("Refresh", "/api/refresh") }}
    </div>

    {% include "partials/terminal.html" %}

    {% call collapse("Edit", badge="compose-farm.yaml") %}
        <div class="editor-wrapper yaml-wrapper">
            <div id="config-editor" class="yaml-editor" data-content="{{ config_content | e }}" data-save-url="/api/config"></div>
        </div>
    {% endcall %}

    {% include "partials/config_tables.html" %}
</div>
{% endblock %}
