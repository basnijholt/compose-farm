{% extends "base.html" %}
{% block title %}{{ name }} - Compose Farm{% endblock %}

{% block content %}
<article>
    <header>
        <hgroup>
            <h1>{{ name }}</h1>
            <p>
                {% if current_host %}
                    <mark>Running on {{ current_host }}</mark>
                {% else %}
                    <mark class="secondary">Not running</mark>
                {% endif %}
                &bull; Configured for: {{ hosts | join(', ') }}
            </p>
        </hgroup>
    </header>

    <!-- Action Buttons -->
    <div role="group">
        <button hx-post="/api/service/{{ name }}/pull"
                hx-swap="none"
                class="secondary">
            Pull
        </button>
        <button hx-post="/api/service/{{ name }}/up"
                hx-swap="none">
            Up
        </button>
        <button hx-post="/api/service/{{ name }}/down"
                hx-swap="none"
                class="secondary">
            Down
        </button>
        <button hx-post="/api/service/{{ name }}/restart"
                hx-swap="none"
                class="contrast">
            Restart
        </button>
        <button id="save-btn" class="outline">
            Save All
        </button>
    </div>

    <!-- Compose Editor -->
    <details>
        <summary>Compose File <small><code>{{ compose_path }}</code></small></summary>
        <div id="compose-editor" class="yaml-editor" data-content="{{ compose_content | e }}" data-save-url="/api/service/{{ name }}/compose"></div>
    </details>

    <!-- Environment Editor -->
    <details>
        <summary>.env File <small><code>{{ env_path }}</code></small></summary>
        <div id="env-editor" class="env-editor" data-content="{{ env_content | e }}" data-save-url="/api/service/{{ name }}/env"></div>
    </details>

    <!-- Terminal -->
    <details open>
        <summary>Terminal Output</summary>
        <div id="terminal-container">
            <div id="terminal-output"></div>
        </div>
    </details>
</article>
{% endblock %}
