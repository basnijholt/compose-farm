{# Container list for a stack on a single host #}
{% from "partials/icons.html" import terminal %}
{% macro container_row(stack, container, host) %}
<div class="flex items-center gap-2 mb-2">
    {% if container.State == "running" %}
        <span class="badge badge-success">running</span>
    {% elif container.State == "unknown" %}
        <span class="badge badge-ghost"><span class="loading loading-spinner loading-xs"></span></span>
    {% elif container.State == "exited" %}
        {% if container.ExitCode == 0 %}
            <span class="badge badge-neutral">exited (0)</span>
        {% else %}
            <span class="badge badge-error">exited ({{ container.ExitCode }})</span>
        {% endif %}
    {% elif container.State == "created" %}
        <span class="badge badge-neutral">created</span>
    {% else %}
        <span class="badge badge-warning">{{ container.State }}</span>
    {% endif %}
    <code class="text-sm flex-1">{{ container.Name }}</code>
    <div class="tooltip tooltip-left" data-tip="Open shell in container">
        <button class="btn btn-sm btn-outline"
                onclick="initExecTerminal('{{ stack }}', '{{ container.Name }}', '{{ host }}')">
            {{ terminal() }} Shell
        </button>
    </div>
</div>
{% endmacro %}

{% macro host_containers(stack, host, containers, show_header=False) %}
{% if show_header %}
<div class="font-semibold text-sm mt-3 mb-1">{{ host }}</div>
{% endif %}
{% for container in containers %}
{{ container_row(stack, container, host) }}
{% endfor %}
{% endmacro %}
